# Создание направляющих документов - Автономная версия

Создайте комплексные направляющие документы для проекта разработки на основе типа проекта и требований.

## Использование

```md
Создайте направляющие документы для [описание проекта]
```

## Примеры

- `Создайте направляющие документы для React TypeScript e-commerce приложения`
- `Создайте направляющие документы для Python Django REST API с PostgreSQL`
- `Создайте направляющие документы для Node.js микросервисной архитектуры`
- `Создайте направляющие документы для Vue.js библиотеки компонентов`

## Процесс

Вы эксперт по созданию направляющих документов проекта, которые обеспечивают контекстное руководство для работы по разработке. Следуйте этому систематическому подходу:

### 1. Анализ проекта

Сначала проанализируйте требования проекта и определите, какие направляющие документы необходимы:

**Для Frontend проектов (React, Vue, Angular):**

- Включить: project-standards.md, git-workflow.md, frontend-standards.md, development-environment.md
- Рассмотреть: component-library.md, testing-strategy.md

**Для Backend/API проектов (Node.js, Python, Java):**

- Включить: project-standards.md, git-workflow.md, api-design.md, development-environment.md
- Рассмотреть: database-standards.md, security-guidelines.md

**Для Full-Stack проектов:**

- Включить: Все основные документы плюс специфичные для технологий
- Рассмотреть: deployment-standards.md, monitoring-guidelines.md

**Для проектов библиотек/пакетов:**

- Включить: project-standards.md, git-workflow.md, documentation-standards.md
- Рассмотреть: versioning-strategy.md, publishing-guidelines.md

### 2. Стратегия создания документов

Создавайте направляющие документы, используя эти шаблоны и руководства:

#### Основные документы (всегда создавать)

**Шаблон project-standards.md:**

```markdown
# Стандарты и руководства проекта

## Стандарты качества кода
- Следуйте руководствам по стилю для конкретного языка (ESLint для JS/TS, Black для Python и т.д.)
- Поддерживайте согласованные соглашения об именовании в кодовой базе
- Пишите самодокументирующийся код с четкими именами переменных и функций
- Включайте осмысленные комментарии для сложной бизнес-логики
- Держите функции небольшими и сфокусированными на единственной ответственности

## Требования к тестированию
- Пишите модульные тесты для всех функций бизнес-логики
- Поддерживайте минимальное покрытие кода 80%
- Включайте интеграционные тесты для API endpoints
- Пишите сквозные тесты для критических пользовательских потоков
- Используйте описательные имена тестов, объясняющие тестируемый сценарий

## Стандарты документации
- Обновляйте README.md для любых значительных изменений
- Документируйте API endpoints с четкими примерами
- Включайте инструкции по настройке и развертыванию
- Ведите changelog для релизов версий
- Документируйте архитектурные решения в формате ADR

## Практики безопасности
- Никогда не коммитьте секреты, API ключи или пароли
- Используйте переменные окружения для конфигурации
- Валидируйте все пользовательские входные данные
- Реализуйте правильную аутентификацию и авторизацию
- Следуйте руководящим принципам безопасности OWASP

## Руководящие принципы производительности
- Оптимизируйте запросы к базе данных и избегайте проблем N+1
- Реализуйте кэширование там, где это уместно
- Используйте ленивую загрузку для больших наборов данных
- Регулярно мониторьте и профилируйте производительность
- Учитывайте масштабируемость в архитектурных решениях
```

**Шаблон git-workflow.md:**

```markdown
# Git Workflow и стратегия ветвления

## Соглашение об именовании веток
- Ветки функций: `feature/описание-функции`
- Исправления ошибок: `fix/описание-ошибки`
- Критические исправления: `hotfix/описание-критической-проблемы`
- Релизы: `release/номер-версии`

## Формат сообщений коммитов
Следуйте формату conventional commits:
```

type(scope): описание

[необязательное тело]

[необязательный футер]

```

Типы: feat, fix, docs, style, refactor, test, chore

## Руководящие принципы Pull Request
- Создавайте PR из ветки функции в main/develop
- Включайте четкое описание изменений
- Связывайте связанные задачи, используя ключевые слова (fixes #123)
- Убедитесь, что все тесты проходят перед запросом обзора
- Сжимайте коммиты при слиянии для поддержания чистой истории

## Процесс обзора кода
- Требуется как минимум одно одобрение перед слиянием
- Обзор качества кода, безопасности и производительности
- Проверьте, что тесты покрывают новую функциональность
- Убедитесь, что документация обновлена при необходимости
- Убедитесь, что нет критических изменений без правильного версионирования
```

#### Условные документы (создавать на основе типа проекта)

**Шаблон frontend-standards.md:**

```markdown
---
inclusion: fileMatch
fileMatchPattern: '*.tsx|*.jsx|*.vue|*.svelte'
---

# Стандарты Frontend разработки

## Архитектура компонентов
- Используйте функциональные компоненты с хуками (React)
- Держите компоненты небольшими и сфокусированными
- Реализуйте правильную валидацию пропсов
- Используйте TypeScript для безопасности типов
- Следуйте паттернам композиции компонентов

## Управление состоянием
- Используйте локальное состояние для данных, специфичных для компонента
- Реализуйте глобальное состояние для общих данных приложения
- Используйте правильные библиотеки управления состоянием (Redux, Zustand, Pinia)
- Избегайте prop drilling с помощью контекста или управления состоянием

## Руководящие принципы стилизации
- Используйте CSS модули или styled-components для стилизации компонентов
- Следуйте методологии BEM для именования CSS классов
- Реализуйте адаптивный дизайн с подходом mobile-first
- Используйте CSS custom properties для темизации
- Поддерживайте согласованные шкалы отступов и типографики

## Оптимизация производительности
- Реализуйте разделение кода и ленивую загрузку
- Используйте React.memo или аналогичные для дорогих компонентов
- Оптимизируйте изображения и ресурсы
- Реализуйте правильные стратегии кэширования
- Мониторьте размер бандла и метрики производительности

## Стандарты доступности
- Используйте семантические HTML элементы
- Реализуйте правильные ARIA атрибуты
- Обеспечьте поддержку навигации с клавиатуры
- Поддерживайте правильные коэффициенты контрастности цветов
- Тестируйте с помощью скрин-ридеров

## Стратегия тестирования
- Пишите модульные тесты для утилитарных функций
- Используйте React Testing Library для тестов компонентов
- Реализуйте визуальное регрессионное тестирование
- Тестируйте пользовательские взаимодействия и рабочие процессы
- Правильно мокайте внешние зависимости
```

**Шаблон api-design.md:**

```markdown
---
inclusion: manual
---

# Руководящие принципы дизайна API

## Стандарты RESTful API
- Используйте HTTP методы соответствующим образом (GET, POST, PUT, DELETE, PATCH)
- Следуйте паттернам URL на основе ресурсов: `/api/v1/users/{id}`
- Используйте множественные существительные для коллекций ресурсов
- Реализуйте правильные HTTP коды состояния
- Включайте версионирование API в путь URL

## Формат запроса/ответа
- Используйте JSON для тел запросов и ответов
- Следуйте согласованным соглашениям об именовании (camelCase или snake_case)
- Включайте пагинацию для endpoints списков
- Реализуйте правильный формат ответа об ошибке:
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid input provided",
    "details": ["Email is required", "Password too short"]
  }
}
```

## Аутентификация и авторизация

- Используйте JWT токены для аутентификации без состояния
- Реализуйте правильные механизмы обновления токенов
- Используйте контроль доступа на основе ролей (RBAC)
- Ограничивайте скорость API endpoints для предотвращения злоупотреблений

## Документация

- Используйте OpenAPI/Swagger для документации API
- Включайте примеры запросов/ответов
- Документируйте все возможные ответы об ошибках
- Предоставляйте примеры SDK или клиентских библиотек

# [[file:openapi.yml]]

```

**Шаблон development-environment.md:**
```markdown
---
inclusion: fileMatch
fileMatchPattern: 'package.json|requirements.txt|Dockerfile|docker-compose.yml'
---

# Настройка среды разработки

## Локальная разработка
- Используйте версию Node.js, указанную в файле .nvmrc
- Устанавливайте зависимости с помощью `npm ci` для согласованных сборок
- Используйте Docker для локальной базы данных и зависимостей сервисов
- Запускайте линтинг и форматирование перед коммитом изменений

## Переменные окружения
- Копируйте `.env.example` в `.env` для локальной разработки
- Никогда не коммитьте фактические файлы окружения
- Документируйте все необходимые переменные окружения в README
- Используйте разные префиксы для разных окружений (DEV_, PROD_ и т.д.)

## Управление базой данных
- Используйте миграции для всех изменений схемы
- Включайте скрипты отката для миграций
- Данные для заполнения должны быть идемпотентными
- Делайте резервные копии базы данных перед крупными изменениями

## Сборка и развертывание
- Обеспечьте воспроизводимость сборок в разных окружениях
- Используйте многоэтапные Docker сборки для оптимизации
- Включайте проверки здоровья в контейнеризированных приложениях
- Документируйте процедуры развертывания и шаги отката

## Отладка и логирование
- Используйте структурированное логирование с соответствующими уровнями логов
- Включайте корреляционные ID для трассировки запросов
- Настройте правильный мониторинг ошибок и оповещения
- Используйте отладчик вместо console.log для разработки
```

### 3. Руководящие принципы настройки контента

**Адаптации для конкретного языка/фреймворка:**

- **JavaScript/TypeScript**: ESLint, Prettier, Jest, скрипты package.json
- **Python**: Black, flake8, pytest, requirements.txt, виртуальные окружения
- **Java**: Checkstyle, Maven/Gradle, JUnit, соглашения Spring Boot
- **Go**: gofmt, go mod, паттерны тестирования, структура проекта
- **Rust**: rustfmt, Cargo.toml, cargo test, clippy

**Адаптации масштаба проекта:**

- **Малые проекты**: Облегченные процессы, минимальный инструментарий
- **Командные проекты**: Требования к обзору кода, общие стандарты
- **Корпоративные**: Комплексная безопасность, соответствие, документация

**Соображения для конкретной предметной области:**

- **E-commerce**: Соответствие PCI, производительность, безопасность
- **Здравоохранение**: Соответствие HIPAA, конфиденциальность данных, аудиторские следы
- **Финансы**: Стандарты безопасности, нормативное соответствие
- **Open Source**: Руководящие принципы вклада, лицензирование, стандарты сообщества

### 4. Интеграция ссылок на файлы

Включайте релевантные внешние файлы, используя синтаксис `#[[file:path]]`:

- Спецификации OpenAPI для API проектов
- Схемы базы данных для backend проектов
- Токены дизайн-системы для frontend проектов
- Файлы конфигурации для настройки окружения

### 5. Чек-лист качества

Перед финализацией направляющих документов убедитесь:

- [ ] Все документы имеют соответствующий front-matter для логики включения
- [ ] Руководящие принципы конкретны и выполнимы, а не общие
- [ ] Предоставлены примеры для сложных концепций
- [ ] Нет конфликтующих стандартов между документами
- [ ] Включены соображения безопасности и производительности
- [ ] Документация покрывает полный жизненный цикл разработки
- [ ] Ссылки на файлы правильно отформатированы и действительны

## Руководство по созданию и использованию направляющих документов

### Что такое направляющие документы?

Направляющие документы - это контекстные руководящие принципы, которые влияют на то, как ИИ-ассистенты подходят к задачам разработки. Они содержат стандарты, соглашения и лучшие практики, специфичные для проекта, которые помогают предоставлять более релевантную и согласованную помощь.

### Как работают направляющие документы

#### Механизмы включения

1. **Всегда включены (по умолчанию)**: Документы без front-matter включаются в каждое взаимодействие
2. **Условное соответствие файлов**: Документы с `inclusion: fileMatch` и `fileMatchPattern` включаются, когда в контексте находятся конкретные файлы
3. **Ручное включение**: Документы с `inclusion: manual` включаются только при явной ссылке с `#steering-name`

#### Интеграция контекста

- Содержимое направляющих документов внедряется в системный контекст ИИ перед обработкой пользовательских запросов
- ИИ получает полное содержимое применимых направляющих документов
- Несколько направляющих документов могут быть активными одновременно
- Ссылки на файлы, использующие синтаксис `#[[file:path]]`, разрешаются и включаются

### Что входит в направляющие документы

#### Основные категории для создания

1. **Стандарты среды разработки**
   - Процедуры локальной настройки
   - Конфигурации инструментов
   - Управление переменными окружения
   - Процессы сборки и развертывания

2. **Руководящие принципы качества кода**
   - Руководства по стилю для конкретного языка
   - Соглашения об именовании
   - Паттерны организации кода
   - Требования к документации

3. **Стандарты Git Workflow**
   - Соглашения об именовании веток
   - Форматы сообщений коммитов
   - Процессы Pull Request
   - Руководящие принципы обзора кода

4. **Стандарты для конкретных технологий**
   - Паттерны frontend разработки
   - Дизайн backend API
   - Управление базой данных
   - Стратегии тестирования

5. **Безопасность и производительность**
   - Лучшие практики безопасности
   - Руководящие принципы оптимизации производительности
   - Стандарты мониторинга и оповещения

#### Структура контента для следования

```markdown
---
inclusion: [always|fileMatch|manual]
fileMatchPattern: 'pattern' # if fileMatch
---

# Четкий заголовок

## Организованные разделы
- Конкретные, выполнимые руководящие принципы
- Примеры кода, где релевантно
- Конфигурации инструментов
- Ссылки на внешние файлы, используя #[[file:path]]

## Детали реализации
- Пошаговые процедуры
- Общие ловушки, которых следует избегать
- Контрольные точки качества
```

### Как создавать направляющие документы

#### Процесс оценки

1. **Анализ проекта**: Изучите структуру кодовой базы, используемые технологии и существующие паттерны
2. **Идентификация пробелов**: Определите области, где стандарты улучшат согласованность
3. **Ранжирование приоритетов**: Сосредоточьтесь сначала на областях с высоким воздействием (безопасность, качество кода, workflow)
4. **Выбор шаблонов**: Выберите подходящие шаблоны на основе типа проекта

#### Разработка контента

1. **Исследование лучших практик**: Опирайтесь на отраслевые стандарты и проверенные паттерны
2. **Контекстуализация для проекта**: Адаптируйте общие практики к конкретным потребностям проекта
3. **Включение примеров**: Предоставляйте конкретные примеры кода и конфигураций
4. **Интеграция ссылок**: Связывайте с существующими файлами проекта и спецификациями

#### Обеспечение качества

1. **Проверка полноты**: Убедитесь, что все критические области покрыты
2. **Валидация согласованности**: Убедитесь, что руководящие принципы не конфликтуют друг с другом
3. **Оценка практичности**: Подтвердите, что руководящие принципы выполнимы и реалистичны
4. **Механизм обновления**: Планируйте поддержание документов по мере развития проекта

### Стратегия включения и передачи контекста

#### Что отправляется

- **Полное содержимое**: Передается полное содержимое направляющих документов
- **Разрешенные ссылки**: Файлы, на которые ссылаются с `#[[file:path]]`, читаются и включаются
- **Несколько документов**: Все применимые направляющие документы объединяются
- **Оценка в реальном времени**: Правила включения оцениваются для каждого взаимодействия

#### Когда документы включаются

- **Всегда**: Поведение по умолчанию для документов без front-matter
- **Триггеры контекста файлов**: Когда в контексте разговора находятся конкретные паттерны файлов
- **Ручные триггеры**: Когда пользователь явно ссылается с `#steering-name`
- **Автоматическое разрешение**: Система определяет релевантность на основе паттернов файлов

#### Ограничения контекста

- Большие направляющие документы могут быть обрезаны, если они превышают лимиты контекста
- Приоритет отдается более специфичным/релевантным направляющим документам
- Недавние взаимодействия могут влиять на то, какие документы приоритизируются

### Лучшие практики для создания направляющих документов

#### Делайте

- Держите документы сфокусированными и конкретными
- Используйте четкий, выполнимый язык
- Включайте конкретные примеры
- Ссылайтесь на внешние спецификации
- Регулярно обновляйте по мере развития проекта
- Используйте подходящие механизмы включения

#### Не делайте

- Создавайте слишком широкие или общие руководящие принципы
- Дублируйте информацию в нескольких документах
- Включайте конфиденциальную информацию или секреты
- Создавайте конфликтующие стандарты
- Делайте документы слишком длинными или сложными

### Обслуживание и эволюция

#### Регулярный обзор

- Оценивайте эффективность существующих направляющих документов
- Обновляйте на основе изменений проекта и полученного опыта
- Удаляйте устаревшие или конфликтующие руководящие принципы
- Добавляйте новые стандарты по мере роста проекта

#### Интеграция обратной связи

- Мониторьте, насколько хорошо направляющие документы влияют на качество кода
- Корректируйте на основе обратной связи команды и паттернов разработки
- Уточняйте паттерны включения для лучшей релевантности
- Оптимизируйте структуру документов для ясности

### Технические заметки по реализации

#### Структура файлов

```
.kiro/steering/
├── project-standards.md (всегда включен)
├── git-workflow.md (всегда включен)
├── frontend-standards.md (fileMatch: *.tsx,*.jsx)
├── api-design.md (ручное включение)
└── development-environment.md (fileMatch: package.json)
```

#### Опции Front-matter

```yaml
---
inclusion: always|fileMatch|manual
fileMatchPattern: 'glob-pattern' # только для fileMatch
---
```

#### Синтаксис ссылок на файлы

```markdown
#[[file:relative/path/to/file.ext]]
```

## Формат вывода

Создайте полный набор направляющих документов в каталоге `.kiro/steering/` с:

1. Подходящим front-matter для логики включения
2. Контентом и примерами, специфичными для проекта
3. Четкими, выполнимыми руководящими принципами
4. Правильными ссылками на файлы, где применимо
5. Согласованным форматированием и структурой

Направляющие документы должны немедленно улучшить согласованность разработки и предоставить контекстное руководство для конкретных требований проекта.
