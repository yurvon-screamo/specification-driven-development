# Диаграммы рабочих процессов и визуальные пособия

Этот документ предоставляет визуальные представления процесса разработки на основе спецификаций, включая полные диаграммы рабочих процессов, деревья решений и потоки переходов между фазами.

## Полный поток процесса

Следующая диаграмма показывает полный рабочий процесс разработки на основе спецификаций от первоначальной идеи до реализации:

```mermaid
stateDiagram-v2
    [*] --> Idea : Запрос функции
    
    Idea --> Requirements : Начать процесс спецификации
    
    state Requirements {
        [*] --> Draft_Req : Создать первоначальные требования
        Draft_Req --> Review_Req : Завершить черновик
        Review_Req --> Revise_Req : Обратная связь/Изменения
        Revise_Req --> Review_Req : Обновленный черновик
        Review_Req --> [*] : Явное одобрение
    }
    
    Requirements --> Design : Требования одобрены
    
    state Design {
        [*] --> Research : Выявить потребности в исследованиях
        Research --> Draft_Design : Создать документ дизайна
        Draft_Design --> Review_Design : Завершить черновик
        Review_Design --> Revise_Design : Обратная связь/Изменения
        Revise_Design --> Review_Design : Обновленный черновик
        Review_Design --> [*] : Явное одобрение
    }
    
    Design --> Tasks : Дизайн одобрен
    
    state Tasks {
        [*] --> Draft_Tasks : Создать разбивку задач
        Draft_Tasks --> Review_Tasks : Завершить черновик
        Review_Tasks --> Revise_Tasks : Обратная связь/Изменения
        Revise_Tasks --> Review_Tasks : Обновленный черновик
        Review_Tasks --> [*] : Явное одобрение
    }
    
    Tasks --> Implementation : Задачи одобрены
    
    state Implementation {
        [*] --> Execute_Task : Выбрать следующую задачу
        Execute_Task --> Test_Task : Завершить задачу
        Test_Task --> More_Tasks : Задача завершена
        More_Tasks --> Execute_Task : Да
        More_Tasks --> [*] : Нет
    }
    
    Implementation --> [*] : Функция завершена
    
    note right of Requirements : Формат EARS\nПользовательские истории\nКритерии приемки
    note right of Design : Архитектура\nКомпоненты\nМодели данных
    note right of Tasks : Задачи кодирования\nОснованные на тестах\nИнкрементальные
```

## Дерево решений переходов между фазами

Это дерево решений помогает определить, когда переходить между фазами и когда итерировать:

```mermaid
flowchart TD
    A[Фаза завершена] --> B{Обзор пользователя}
    B -->|Явное одобрение| C[Перейти к следующей фазе]
    B -->|Обратная связь/Изменения| D[Пересмотреть текущую фазу]
    B -->|Крупные проблемы| E{Область изменений}
    
    E -->|Незначительные корректировки| D
    E -->|Фундаментальные изменения| F{Какую фазу пересмотреть?}
    
    F -->|Проблемы требований| G[Вернуться к требованиям]
    F -->|Проблемы дизайна| H[Вернуться к дизайну]
    F -->|Проблемы задач| I[Пересмотреть задачи]
    
    D --> J[Обновить документ]
    G --> K[Обновить требования]
    H --> L[Обновить дизайн]
    I --> M[Обновить задачи]
    
    J --> A
    K --> A
    L --> A
    M --> A
    
    C --> N{Финальная фаза?}
    N -->|Нет| O[Начать следующую фазу]
    N -->|Да| P[Начать реализацию]
    
    O --> A
    P --> Q[Выполнить задачи]
```

## Поток фазы требований

Детальный рабочий процесс для фазы сбора требований:

```mermaid
flowchart TD
    A[Идея функции] --> B[Анализировать первоначальный запрос]
    B --> C[Создать первоначальный черновик требований]
    C --> D[Форматировать с синтаксисом EARS]
    D --> E[Добавить пользовательские истории]
    E --> F[Определить критерии приемки]
    F --> G[Рассмотреть граничные случаи]
    G --> H[Представить пользователю]
    
    H --> I{Обратная связь пользователя}
    I -->|Одобрено| J[Требования завершены]
    I -->|Нужны изменения| K[Выявить области изменений]
    I -->|Неясные требования| L[Задать уточняющие вопросы]
    
    K --> M[Обновить требования]
    L --> N[Собрать дополнительную информацию]
    
    M --> H
    N --> M
    
    J --> O[Перейти к фазе дизайна]
    
    style A fill:#e1f5fe
    style J fill:#c8e6c9
    style O fill:#fff3e0
```

## Поток фазы дизайна

Детальный рабочий процесс для фазы дизайна:

```mermaid
flowchart TD
    A[Требования одобрены] --> B[Выявить потребности в исследованиях]
    B --> C[Провести исследования]
    C --> D[Анализировать находки]
    D --> E[Создать обзор архитектуры]
    E --> F[Определить компоненты]
    F --> G[Спроектировать модели данных]
    G --> H[Спланировать обработку ошибок]
    H --> I[Определить стратегию тестирования]
    I --> J[Представить дизайн пользователю]
    
    J --> K{Обратная связь пользователя}
    K -->|Одобрено| L[Дизайн завершен]
    K -->|Нужны изменения| M[Обновить дизайн]
    K -->|Пробел в требованиях| N[Вернуться к требованиям]
    
    M --> J
    N --> O[Обновить требования]
    O --> P[Обновить дизайн]
    P --> J
    
    L --> Q[Перейти к фазе задач]
    
    style A fill:#fff3e0
    style L fill:#c8e6c9
    style Q fill:#f3e5f5
```

## Поток фазы задач

Детальный рабочий процесс для разбивки дизайна на задачи реализации:

```mermaid
flowchart TD
    A[Дизайн одобрен] --> B[Анализировать компоненты дизайна]
    B --> C[Выявить порядок реализации]
    C --> D[Создать иерархию задач]
    D --> E[Определить зависимости задач]
    E --> F[Добавить ссылки на требования]
    F --> G[Обеспечить подход, основанный на тестах]
    G --> H[Валидировать полноту задач]
    H --> I[Представить задачи пользователю]
    
    I --> J{Обратная связь пользователя}
    J -->|Одобрено| K[Задачи завершены]
    J -->|Нужны изменения| L[Обновить задачи]
    J -->|Проблемы дизайна| M[Вернуться к дизайну]
    J -->|Проблемы требований| N[Вернуться к требованиям]
    
    L --> I
    M --> O[Обновить дизайн]
    N --> P[Обновить требования]
    
    O --> Q[Обновить задачи]
    P --> R[Обновить дизайн и задачи]
    
    Q --> I
    R --> I
    
    K --> S[Начать реализацию]
    
    style A fill:#f3e5f5
    style K fill:#c8e6c9
    style S fill:#ffecb3
```

## Поток выполнения реализации

Рабочий процесс для выполнения отдельных задач из плана реализации:

```mermaid
flowchart TD
    A[Задачи одобрены] --> B[Выбрать следующую задачу]
    B --> C{Есть подзадачи?}
    C -->|Да| D[Выполнить подзадачи сначала]
    C -->|Нет| E[Прочитать требования и дизайн]
    
    D --> F[Завершить все подзадачи]
    F --> G[Отметить родительскую задачу завершенной]
    
    E --> H[Реализовать задачу]
    H --> I[Написать тесты]
    I --> J[Проверить против требований]
    J --> K[Отметить задачу завершенной]
    
    G --> L{Еще задачи?}
    K --> L
    
    L -->|Да| B
    L -->|Нет| M[Функция завершена]
    
    style A fill:#ffecb3
    style M fill:#c8e6c9
```

## Паттерны обратной связи

Распространенные паттерны для обработки обратной связи и итераций:

```mermaid
flowchart LR
    subgraph "Петля положительной обратной связи"
        A1[Завершить фазу] --> B1[Обзор пользователя]
        B1 --> C1[Одобрение]
        C1 --> D1[Следующая фаза]
    end
    
    subgraph "Петля пересмотра"
        A2[Завершить фазу] --> B2[Обзор пользователя]
        B2 --> C2[Обратная связь]
        C2 --> D2[Пересмотреть]
        D2 --> A2
    end
    
    subgraph "Петля отката"
        A3[Текущая фаза] --> B3[Крупная проблема]
        B3 --> C3[Предыдущая фаза]
        C3 --> D3[Исправить проблему]
        D3 --> E3[Обновить текущую]
        E3 --> A3
    end
    
    style C1 fill:#c8e6c9
    style C2 fill:#fff3e0
    style B3 fill:#ffcdd2
```

## Точки входа и контекст

Разные способы, которыми пользователи могут войти в рабочий процесс спецификации:

```mermaid
flowchart TD
    A[Намерение пользователя] --> B{Точка входа}
    
    B -->|Новая функция| C[Создать новую спецификацию]
    B -->|Обновить существующую| D[Модифицировать спецификацию]
    B -->|Выполнить задачи| E[Режим реализации]
    
    C --> F[Фаза требований]
    D --> G{Какая фаза?}
    E --> H[Выполнение задач]
    
    G -->|Требования| I[Обновить требования]
    G -->|Дизайн| J[Обновить дизайн]
    G -->|Задачи| K[Обновить задачи]
    
    F --> L[Завершить рабочий процесс]
    I --> L
    J --> L
    K --> L
    H --> M[Фокус на одной задаче]
    
    style C fill:#e1f5fe
    style D fill:#fff3e0
    style E fill:#ffecb3
```

## Контрольные точки качества и валидации

Ключевые контрольные точки валидации на протяжении процесса:

```mermaid
flowchart TD
    subgraph "Контрольные точки качества требований"
        A1[Проверка формата EARS]
        A2[Валидация пользовательских историй]
        A3[Завершенность критериев приемки]
        A4[Рассмотрение граничных случаев]
    end
    
    subgraph "Контрольные точки качества дизайна"
        B1[Ясность архитектуры]
        B2[Определение компонентов]
        B3[Полнота модели данных]
        B4[План обработки ошибок]
    end
    
    subgraph "Контрольные точки качества задач"
        C1[Гранулярность задач]
        C2[Порядок зависимостей]
        C3[Прослеживаемость требований]
        C4[Структура, основанная на тестах]
    end
    
    subgraph "Контрольные точки качества реализации"
        D1[Качество кода]
        D2[Покрытие тестами]
        D3[Соответствие требованиям]
        D4[Успех интеграции]
    end
    
    A1 --> A2 --> A3 --> A4
    B1 --> B2 --> B3 --> B4
    C1 --> C2 --> C3 --> C4
    D1 --> D2 --> D3 --> D4
    
    A4 --> B1
    B4 --> C1
    C4 --> D1
```

## Распространенные сценарии рабочих процессов

### Сценарий 1: Плавное линейное прогрессирование
```mermaid
sequenceDiagram
    participant U as Пользователь
    participant A as ИИ-агент
    participant R as Требования
    participant D as Дизайн
    participant T as Задачи
    
    U->>A: Запрос функции
    A->>R: Создать требования
    A->>U: Обозреть требования
    U->>A: Одобрить
    A->>D: Создать дизайн
    A->>U: Обозреть дизайн
    U->>A: Одобрить
    A->>T: Создать задачи
    A->>U: Обозреть задачи
    U->>A: Одобрить
    Note over U,T: Готово к реализации
```

### Сценарий 2: Итеративное уточнение
```mermaid
sequenceDiagram
    participant U as Пользователь
    participant A as ИИ-агент
    participant R as Требования
    participant D as Дизайн
    
    U->>A: Запрос функции
    A->>R: Создать требования v1
    A->>U: Обозреть требования
    U->>A: Нужны изменения
    A->>R: Обновить требования v2
    A->>U: Обозреть требования
    U->>A: Одобрить
    A->>D: Создать дизайн v1
    A->>U: Обозреть дизайн
    U->>A: Найден пробел в требованиях
    A->>R: Обновить требования v3
    A->>D: Обновить дизайн v2
    A->>U: Обозреть дизайн
    U->>A: Одобрить
```

### Сценарий 3: Обратная связь реализации
```mermaid
sequenceDiagram
    participant U as Пользователь
    participant A as ИИ-агент
    participant T as Задачи
    participant I as Реализация
    
    Note over U,I: Спецификация завершена, начать реализацию
    U->>A: Выполнить задачу 1
    A->>I: Реализовать задачу 1
    A->>U: Задача 1 завершена
    U->>A: Выполнить задачу 2
    A->>I: Реализовать задачу 2
    A->>U: Найдена проблема
    U->>A: Исправить подход
    A->>T: Обновить задачу 2
    A->>I: Пере-реализовать задачу 2
    A->>U: Задача 2 завершена
```

Эти визуальные пособия предоставляют комплексное руководство для понимания и навигации процесса разработки на основе спецификаций, поддерживая как новичков, изучающих методологию, так и опытных практиков, ищущих справочные материалы.