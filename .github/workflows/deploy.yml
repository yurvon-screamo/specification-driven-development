name: Deploy methodology.uwuwu.net

on:
  workflow_run:
    workflows: ["Docker Build and Push"]
    types:
      - completed
    branches:
      - main

jobs:
  deploy-methodology:
    runs-on: [self-hosted, uwuwu]
    if: ${{ github.event.workflow_run.conclusion == 'success' }}
    
    steps:
      - name: Deploy methodology.uwuwu.net
        run: |
          cd /root/uwuwu-vpn
          ./up.bash
