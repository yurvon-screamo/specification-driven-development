# Направляющие документы

**Цель:** Обеспечить согласованность, качество и эффективность разработки путем создания и поддержания набора живых, атомарных документов, которые служат общим контекстом проекта и направляют команду при реализации любых рабочих элементов, от микро-спецификаций до крупных фич.

## Основные принципы

Направляющие документы — это не статичные артефакты, а динамические инструменты управления знаниями и обеспечения качества. Их создание и поддержка регулируются следующими ключевыми принципами:

1. **Атомарность и фокус:** Каждый документ должен быть сфокусирован на одной конкретной теме (например, `git_workflow`, `react_component_structure`, `postgres_naming_conventions`). Избегайте создания монолитных, всеобъемлющих мануалов.
2. **Живая документация:** Документы должны регулярно обновляться по мере эволюции проекта, технологий и лучших практик. Устаревшая документация хуже, чем ее отсутствие.
3. **Практическая ориентация:** Содержание должно быть напрямую применимо разработчиками в их повседневной работе. Фокус на "как" и "почему", а не на абстрактных теориях.
4. **Контекстуальность:** Документы могут быть глобальными (для всего решения) или локальными (для конкретного модуля, микросервиса или компонента). Важно четко указать область применения.
5. **Интеграция в рабочий процесс:** Направляющие документы являются неотъемлемой частью процесса разработки на основе спецификаций. Они должны явно ссылаться в дизайне спецификаций и учитываться при планировании задач.
6. **Ответственность за актуальность:** Рекомендуется создавать в спецификациях отдельные задачи на поддержание актуальности направляющих документов, особенно после внесения значительных изменений в кодовую базу или инфраструктуру.

---

## Основные категории направляющих документов

Для обеспечения полного охвата жизненного цикла разработки направляющие документы группируются по следующим категориям:

### 1. Стандарты среды разработки и инфраструктуры

* **Цель:** Обеспечить единообразие и воспроизводимость локальных и CI/CD окружений.
* **Примеры документов:**
  * `development_environment_setup`: Процедуры локальной настройки, зависимости, конфигурации IDE.
  * `environment_variables_management`: Правила именования, хранения и управления переменными окружения.
  * `build_and_deployment_processes`: Скрипты сборки, конфигурации CI/CD пайплайнов, процедуры деплоя на разные среды.
  * `infrastructure_as_code_standards`: Стандарты для Terraform, CloudFormation и т.д.

### 2. Руководящие принципы качества кода

* **Цель:** Поддерживать высокое качество, читаемость и поддерживаемость кодовой базы.
* **Примеры документов:**
  * `language_style_guide_[язык]`: Руководства по стилю (например, `python_style_guide`, `typescript_style_guide`).
  * `naming_conventions`: Соглашения об именовании переменных, функций, классов, файлов, БД.
  * `code_organization_patterns`: Паттерны структурирования проекта, модулей, компонентов.
  * `code_documentation_requirements`: Требования к комментариям, докстрингам, генерации документации.

### 3. Стандарты Git Workflow

* **Цель:** Обеспечить предсказуемый и эффективный процесс совместной работы с исходным кодом.
* **Примеры документов:**
  * `git_branching_strategy`: Соглашения об именовании веток (например, `feature/`, `hotfix/`, `release/`).
  * `commit_message_format`: Формат сообщений коммитов (например, Conventional Commits).
  * `pull_request_process`: Процедуры создания, рецензирования и мержа PR (требования к описанию, checklist'ы).
  * `code_review_guidelines`: Руководящие принципы для ревьюверов и авторов (что проверять, как давать фидбэк).

### 4. Стандарты для конкретных технологий и архитектуры

* **Цель:** Задать единые правила проектирования и реализации для ключевых технологий проекта.
* **Примеры документов:**
  * `frontend_architecture_patterns`: Паттерны разработки UI (например, структура компонентов React/Vue, управление состоянием).
  * `backend_api_design`: Стандарты проектирования REST/gRPC API (версионирование, структура ответов, коды ошибок, документация через OpenAPI/Swagger).
  * `database_design_and_migration`: Правила проектирования схем БД, соглашения по миграциям, стратегии индексирования.
  * `testing_strategy_[уровень]`: Глобальные стратегии тестирования (например, `unit_testing_strategy`, `e2e_testing_strategy`, выбор фреймворков, покрытие).

### 5. Безопасность, производительность и наблюдаемость

* **Цель:** Заложить основы для создания надежных, безопасных и легко диагностируемых систем.
* **Примеры документов:**
  * `security_practices`: Применяемые практики безопасности (валидация ввода, управление сессиями, работа с секретами, сканирование зависимостей).
  * `performance_optimization_guidelines`: Руководящие принципы оптимизации (кеширование, асинхронная обработка, профилирование).
  * `monitoring_and_alerting_standards`: Стандарты логирования, метрик, трейсинга и настройки алертов.

### 6. Бизнес-контекст и архитектура

* **Цель:** Обеспечить общее понимание предметной области и высокоуровневой структуры системы.
* **Примеры документов (основные, всегда создавать):**
  * `tech_stack`: Явное обоснование выбора каждой технологии в стеке, их версии.
  * `domain_glossary`: Словарь ключевых бизнес-терминов и понятий проекта.
  * `project_dataflow`: Общее описание потоков данных в системе.
  * `context_diagram_c4`: C4-диаграмма контекста системы (уровень 1, рекомендуется синтаксис likec4).
  * `container_diagram_c4`: C4-диаграмма контейнеров (уровень 2, рекомендуется синтаксис likec4).

---

## Пошаговый процесс создания и поддержки

### Шаг 1: Оценка потребности и планирование

* **Цель:** Определить, какой направляющий документ необходим, и спланировать его создание.
* **Процесс:**
    1. **Анализ проекта:** Изучите текущую кодовую базу, выявите несогласованности или области, где отсутствие стандарта ведет к ошибкам.
    2. **Идентификация пробелов:** Определите, какая категория стандарта отсутствует или требует обновления.
    3. **Ранжирование приоритетов:** Оцените потенциальное воздействие документа. Приоритет: безопасность > качество кода > workflow > производительность.
    4. **Выбор шаблона и масштаба:** Определите, будет ли документ глобальным или компонентным. Выберите подходящий уровень детализации (облегченный для небольших команд, комплексный для корпоративных решений).
    5. **Создание задачи:** Зафиксируйте необходимость создания/обновления документа в бэклоге как отдельный рабочий элемент.

### Шаг 2: Разработка контента

* **Цель:** Создать практический, понятный и полезный документ.
* **Процесс:**
    1. **Исследование лучших практик:** Используйте отраслевые стандарты (Google Style Guides, 12-factor app) как основу.
    2. **Контекстуализация для проекта:** Адаптируйте общие практики под конкретные технологии, ограничения и цели проекта.
    3. **Включение примеров:** Обязательно включайте конкретные, рабочие примеры кода, конфигурационных файлов или диаграмм. "Показать, а не рассказать".
    4. **Интеграция ссылок:** Связывайте новый документ с другими направляющими документами, а также с релевантными разделами в дизайн-спецификациях.
    5. **Формализация:** Используйте четкий, недвусмысленный язык. Избегайте слов "желательно", "рекомендуется" там, где можно использовать "должен", "не должен".

### Шаг 3: Валидация и утверждение

* **Цель:** Убедиться, что документ полезен, выполним и не содержит ошибок.
* **Критерии качества:**
  * **Выполнимость:** Может ли разработчик сразу применить эти правила на практике?
  * **Ясность:** Понятен ли документ новому члену команды?
  * **Согласованность:** Не противоречит ли он другим направляющим документам или утвержденным дизайн-спецификациям?
  * **Полнота:** Покрывает ли он все ключевые аспекты заявленной темы?
  * **Актуальность:** Основан ли он на текущем состоянии проекта и технологий?
* **Процесс:** Проведите ревью документа с ключевыми разработчиками и архитекторами. Получите формальное утверждение от технического лидера.

### Шаг 4: Обслуживание и эволюция

* **Цель:** Поддерживать документ в актуальном состоянии на протяжении всего жизненного цикла проекта.
* **Процесс:**
    1. **Регулярный обзор:** Периодически проверяйте актуальности всех направляющих документов.
    2. **Обновление при изменениях:** Любое значительное изменение в архитектуре, стеке технологий или процессах **должно** сопровождаться обновлением релевантных направляющих документов. Это может быть отдельной задачей в рамках соответствующей спецификации.
    3. **Удаление устаревшего:** Не бойтесь удалять документы или их разделы, которые больше не актуальны. Поддерживайте "минимальную достаточность".

---

## Чек-лист качества направляющих документов

> (Заполняется после создания или обновления документа)

| Критерий                                                                    | Выполнено | Комментарий |
| --------------------------------------------------------------------------- | --------- | ----------- |
| Документ сфокусирован на одной конкретной теме (атомарен)                   | ☐        |             |
| Содержание практично и непосредственно применимо разработчиками             | ☐        |             |
| Включены конкретные, рабочие примеры                                        | ☐        |             |
| Предоставлено обоснование для ключевых правил и выборов                     | ☐        |             |
| Документ не содержит конфиденциальных данных или секретов                   | ☐        |             |
| Нет конфликтов с другими направляющими документами                          | ☐        |             |
| Язык документа четкий, недвусмысленный и использует "должен"/"не должен"    | ☐        |             |
| Документ содержит ссылки на связанные направляющие документы и спецификации | ☐        |             |
| Указаны область применения (глобальный/компонентный) и владельцы            | ☐        |             |
| Планируется регулярный обзор и обновление документа                         | ☐        |             |

---
